<!doctype html>

<html lang="de">

<head>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <title>StockPilot – Bestand • Einkauf • Verkauf</title>

  <link rel="stylesheet" href="style.css" />

</head>

<body>
  <div class="app">

    <header class="topbar">
      <div class="brand">

        <div class="logo">SP</div>
          <div>

            <div class="brand-title">StockPilot</div>
            <div class="brand-sub">Bestand • Einkauf • Verkauf • Offline</div>

          </div>

      </div>

        <div class="top-actions">

        <button class="btn btn-ghost" id="btnExport">Export CSV</button>
        <label class="btn btn-ghost filelike">
          Import CSV
          <input id="fileImport" type="file" accept=".csv" />
        </label>
        <button class="btn btn-danger" id="btnReset">Reset</button>
      </div>
    </header>

    <main class="grid">
      <!-- KPI -->
      <section class="card kpi">
        <div class="kpi-item">
          <div class="kpi-label">Artikel</div>
          <div class="kpi-value" id="kpiItems">0</div>
        </div>
        <div class="kpi-item">
          <div class="kpi-label">Gesamtbestand</div>
          <div class="kpi-value" id="kpiStock">0</div>
        </div>
        <div class="kpi-item">
          <div class="kpi-label">Warenwert (EK)</div>
          <div class="kpi-value" id="kpiValue">0 €</div>
        </div>
        <div class="kpi-item">
          <div class="kpi-label">Umsatz (VK, Historie)</div>
          <div class="kpi-value" id="kpiRevenue">0 €</div>
        </div>
      </section>

      <section class="card">
        <div class="card-head">
          <h2>Artikel anlegen</h2>
          <div class="muted">Stammdaten + Startbestand</div>
        </div>

        <form id="formItem" class="form">
          <div class="row">
            <div class="field">
              <label>Name</label>
              <input id="name" type="text" placeholder="z.B. Schrauben M6" required />
            </div>
            <div class="field">
              <label>Kategorie</label>
              <input id="category" type="text" placeholder="z.B. Zubehör" />
            </div>
          </div>

          <div class="row">
            <div class="field">
              <label>Einheit</label>
              <input id="unit" type="text" placeholder="z.B. Stk, kg, m, L" required />
            </div>
            <div class="field">
              <label>Preis/Einheit (VK netto)</label>
              <input id="price" type="number" step="0.01" min="0" placeholder="0.00" required />
            </div>
          </div>

          <div class="row">
            <div class="field">
              <label>EK/Einheit (netto)</label>
              <input id="cost" type="number" step="0.01" min="0" placeholder="0.00" required />
            </div>
            <div class="field">
              <label>Startbestand</label>
              <input id="initialStock" type="number" step="1" min="0" placeholder="0" value="0" required />
            </div>
          </div>

          <div class="row actions">
            <button class="btn btn-primary" type="submit">Artikel speichern</button>
          </div>
        </form>
      </section>

      <section class="card">
        <div class="card-head">
          <h2>Bewegung buchen</h2>
          <div class="muted">Einkauf erhöht Bestand, Verkauf reduziert Bestand</div>
        </div>

        <form id="formMove" class="form">
          <div class="row">
            <div class="field">
              <label>Artikel</label>
              <select id="moveItem" required></select>
            </div>
            <div class="field">
              <label>Typ</label>
              <select id="moveType" required>
                <option value="purchase">Einkauf</option>
                <option value="sale">Verkauf</option>
                <option value="adjust">Korrektur</option>
              </select>
            </div>

            <div class="field">
              <label>Menge</label>
              <input id="moveQty" type="number" step="1" required value="1" />
            </div>
            </div>

            <div class="row">
              <div class="field">
                <label>Preis/Einheit (optional)</label>
                <input id="moveUnit" type="number" step="0.01" min="0" placeholder="Standard EK/VK" />
              </div>

              <div class="field">
                <label>Notiz</label>
                <input id="moveNote" type="text" placeholder="z.B. Bestellung #123" />
              </div>
            </div>

            <div class="row actions">
              <button class="btn btn-primary" type="submit">Buchen</button>
            </div>
        
            <div class="hint">
              „Korrektur“: Menge kann positiv oder negativ sein.
            </div>

            </section>

            <section class="card wide">
              <div class="card-head split">
                <div>
                <h2>Artikelübersicht</h2>
                <div class="muted">Suche, Filter, Bearbeiten, Löschen</div>
            </div>

            <div class="tools">
            
              <input id="search" class="search" type="search" placeholder="Suche nach Name, Kategorie, Einheit..." />
              <select id="filterStock">
              <option value="all">Alle</option>
              <option value="low">Niedriger Bestand (≤ 5)</option>
              <option value="zero">Nur 0 Bestand</option>
              </select>

            </div>
          </div>

            <div class="table-wrap">
              <table class="table" id="itemsTable">
                <thead>
                  <tr>
                    <th>Name</th>
                      <th>Kategorie</th>
                      <th>Einheit</th>
                        <th class="num">EK/Einheit</th>
                        <th class="num">Preis/Einheit</th>
                        <th class="num">Bestand</th>
                        <th class="num">Wert (EK)</th>
                        <th>Aktionen</th>
                  </tr>
                </thead>
              </table>
            </div>
          </section>

      
            <section class="card wide">
              <div class="card-head split">
                <div>
                  <h2>Historie</h2>
                  <div class="muted">Alle Buchungen, auditierbar</div>
                  </div>

                <div class="tools">
                  <button class="btn btn-ghost" id="btnClearHistory">Historie leeren</button>
                </div>
              </div>

            <div class="table-wrap">
              <table class="table" id="historyTable">
                <thead>
                  <tr>
                    <th>Datum</th>
                    <th>Typ</th>
                    <th>Name</th>
                    <th>Einheit</th>
                    <th class="num">Menge</th>
                    <th class="num">Preis/Einheit</th>
                    <th class="num">Summe</th>
                    <th>Notiz</th>
                    <th>Aktionen</th>
                  </tr>
                </thead>
              </table>
            </div>
          </section>
    </main>

              <footer class="footer">
                
                <span class="muted">Speicherung: lokal im Browser (LocalStorage). Kein Server. Keine Cloud.</span>
              
              </footer>
            
            </div>

            <div class="modal" id="modal" aria-hidden="true">

              <div class="modal-card">
              <div class="modal-head">
              <div class="modal-title" id="modalTitle">Bearbeiten</div>

              <button class="btn btn-ghost" id="modalClose">✕</button>

            </div>

    
    <form id="modalForm" class="form modal-body">

          <input type="hidden" id="editId" />

            <div class="row">
              <div class="field">
              <label>Name</label>
              <input id="editName" type="text" required />

            </div>

          <div class="field">

            <label>Kategorie</label>
            <input id="editCategory" type="text" />

          </div>

        </div>
        
            <div class="row">
          <div class="field">

            <label>Einheit</label>
              <input id="editUnit" type="text" required />

          </div>

          <div class="field">
            <label>Preis/Einheit (VK netto)</label>
            <input id="editPrice" type="number" step="0.01" min="0" required />
          </div>

        </div>

              <div class="row">
                <div class="field">
                  <label>EK/Einheit (netto)</label>
                <input id="editCost" type="number" step="0.01" min="0" required />

              </div>

              <div class="field">
                <label>Bestand</label>
                  <input id="editStock" type="number" step="1" required />
                </div>

              </div>

              <div class="row actions">
                <button class="btn btn-primary" type="submit">Speichern</button>
              </div>

    </form>
        
              </div>
  
              </div>

                <script src="app.js"></script>

  </body>
  </html>
